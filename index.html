<!doctype html>
<head>
<style>
	body {
    margin:0;
    height: 100%;
	}

	#sketch {
 	width: 500px;
 	height: 500px;
 	margin: 10px;
	}
	</style>
</head>
<title>Socket.io Demo</title>
<body>
<canvas id="sketch"></canvas>
<div id="tweets"></div>
 
<script src="/socket.io/socket.io.js"></script>
<script src="http://www.jacopocolo.com/paperjs/js/paper-full.min.js"></script>

<script>
window.onload = function() {
var canvas = document.getElementById('sketch');
paper.setup(canvas);

var halfx = canvas.height/2;
var halfy = canvas.width/2;
console.log(halfx, halfy);
paper.view.draw();

};

//SOCKET.IO

  var socket = io.connect('/'),
  
  tweets = document.getElementById('tweets');
  socket.on('tweet', function (data, dataliste, datacolore) {
  //  tweets.innerHTML = tweets.innerHTML + '<br>' + data;
    console.log(dataliste, datacolore);
    drawLine(datacolore);
    });
  
  socket.on('connect', function(){
                      socket.emit('search', prompt("What do you want to search on Twitter?"));
                  });
                  
function drawLine(colore) {
	
	var cerchio = new paper.Shape.Circle({
	    center: [250, 250],
	    radius: 10,
	    fillColor: '#'+colore,
	    strokeWidth: 2,
	    opacity: 0.5
	});
	
	paper.view.onFrame = function(event) {
	console.log(event.count);
	cerchio.radius += 1;
	};
	
	paper.view.draw();
	console.log("disegnata!");
};

</script>
</body>